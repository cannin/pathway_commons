---
title: "Pathway Commons: Glycolysis"
---

```{r include=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)
```

```{r, echo=FALSE, results='asis'}
library(magrittr)

source("readGmt.R")

img_files <- list.files(".", pattern="png", recursive=TRUE, full.names=TRUE)
gmt_files <- list.files(".", pattern="gmt", recursive=TRUE, full.names=TRUE)

tmp_df <- data.frame(img=img_files, gmt=gmt_files, stringsAsFactors=FALSE)
tmp_df <- tmp_df[!grepl("docs", tmp_df$img),]

for(i in 1:nrow(tmp_df)) {
  #i <- 2
  t1 <- readGmt(gmt_files[i], returnInfo = TRUE)
  t2 <- as.data.frame(t1[[1]], stringsAsFactors=FALSE)
  t3 <- t2[, c(2:3)]
  t3$name <- gsub("\\[.*\\]", "", t3$name) %>% trimws 
  t4 <- unique(t3)  
  
  name <- t4$name
  data_source <- t4$dataSource
  title <- paste0("Pathway: ", name, " Source: ", data_source)
  
  cat(knitr::asis_output(htmltools::htmlPreserve(paste0("<h2>", title, "</h2>"))))
  
  genes <- paste(t2$geneSet, collapse=" ")
  alt_text <- paste0(title, " Genes: ", genes)
  
  cat(knitr::asis_output(htmltools::htmlPreserve(paste0("<img src=\"", img_files[i], "\" alt=\"", alt_text, "\"/>"))))
}
```
